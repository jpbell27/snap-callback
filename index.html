<!doctype html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Snap OAuth Callback</title>
<style>
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;margin:32px}
  pre{background:#f6f8fa;padding:12px;border-radius:8px;white-space:pre-wrap}
</style>
<h2>Snap OAuth complete</h2>
<pre id="out">Loadingâ€¦</pre>
<script>
(function () {
  try {
    const p = new URLSearchParams(location.search);
    const code = p.get("code");
    const state = p.get("state") || "";
    const out = document.getElementById("out");
    if (code) {
      out.textContent = "code: " + code + "\nstate: " + state;
      if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(code).catch(()=>{});
      }
    } else {
      out.textContent = "No ?code= in the URL.\nTry adding ?code=test to the end of the page URL.";
    }
  } catch (e) {
    document.getElementById("out").textContent = "Error: " + e;
    console.error(e);
  }
})();
</script>
<noscript>Enable JavaScript to see the code.</noscript>

